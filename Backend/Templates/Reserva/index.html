{% extends 'base.html' %}
{% load static %}

{% block title %}Página Inicial - Reservas{% endblock %}

{% block body %}
<div class="pagetitle">
  <h1>Reservas</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
      <li class="breadcrumb-item active">Reservas</li>
    </ol>
  </nav>
</div><!-- End Page Title -->

<section class="section dashboard">
  <div class="row">

    <!-- Logs -->
    <div class="col-lg-12" id="app">

      <!-- Recent Activity -->
      <div class="card">
        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Hoje</a></li>
            <li><a class="dropdown-item" href="#">Neste mês</a></li>
            <li><a class="dropdown-item" href="#">Neste ano</a></li>
          </ul>
        </div>

        <div class="card-body">
          <h5 class="card-title">Atividades Recentes <span>| Hoje</span></h5>


          <div class="col-lg-12">
            {% if reservas %}
            <table class="table datatables">
              <thead>
              <tr>
                <th scope="col">#</th>          
                <th scope="col">Morador</th>
                <th scope="col">HU</th>
                <th scope="col">Espaço</th>
                <th scope="col">Data Início</th>
                <th scope="col">Data Final</th>
                <th scope="col">Criado em</th>
                <th scope="col">Status</th>
                <th scope="col">Ações</th>
              </tr>
              </thead>
              <tbody>
              {% for item in reservas %}
              <tr>
                <td>{{ item.id }}</td>          
                <td>
                  {{ item.userApp.name | title }}
                </td>   
                <td>{{ item.userApp.hu | title }}</td>
                <td>{{ item.espaco.nome }}</td>          
                <td>{{ item.data_inicio }}</td>          
                <td>
                  {{ item.data_fim }}
                </td>
                <td>{{ item.created_at }}</td>
                <td>
                  {% if item.status == 0 %}
                  Pendente de Aprovação
                  {% elif item.status == 1 %}
                  Confirmado
                  {% else %}
                  Negado
                  {% endif %}
                </td>
                <td>
                  <!-- Menu de Ações -->
                  <div class="btn-group">
                    <button type="button" class="btn btn-primary">Opções</button>
                    <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                      <span class="visually-hidden">Opções</span>
                    </button>
                    <ul class="dropdown-menu">
                      <li>
                        <a class="dropdown-item" href="{% url 'ReservaAprovarAction' item.id %}"><i class="bi bi-hand-thumbs-up-fill"></i> Aprovar</a>
                      </li>                
                      <li>
                        <a class="dropdown-item" href="{% url 'ReservaNegarAction' item.id %}"><i class="bi bi-hand-thumbs-down-fill"></i> Negar</a>
                      </li>                
                      <li><hr class="dropdown-divider"></li>
                      <li>
                        <a class="dropdown-item" href="#" @click.once="deleteConfirm('{% url 'ReservaDeleteAction' item.id  %}')">
                          <i class="bi bi-x-circle"></i> Excluir
                        </a>
                      </li>
                    </ul>
                  </div>
                </td>
                {% endfor %}
              </tr>
              </tbody>
            </table>
            {% else %}
            <div class="alert alert-danger" role="alert">
              Não há dados!
            </div>
            {% endif %}
          </div>

          

        </div>
      </div><!-- End Recent Activity -->      

    </div><!-- End Right side columns -->

  </div>
</section>

{% endblock %}

{% block js %}
<script src="{% static 'backend/vendor/apexcharts/apexcharts.min.js' %}"></script>
<script src="{% static 'backend/vendor/echarts/echarts.min.js' %}"></script>
<script src="{% static 'backend/vendor/simple-datatables/simple-datatables.js' %}"></script>
<script src="{% static 'backend/vendor/quill/quill.min.js' %}"></script>
<script src="{% static 'backend/js/Maquina/index.js' %}"></script>


{% endblock %}